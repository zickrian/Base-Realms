/* Container - Overlay (From QuestMenu) */
.container {
    font-family: 'VT323', monospace;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(2px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    animation: fadeIn 0.2s ease-out;
}

/* Main Box - From QuestMenu */
.menuBox {
    width: 90%;
    max-width: 400px;
    /* Increased width for cards */
    height: 80vh;
    max-height: 700px;
    background-color: #e8be82;
    box-shadow: inset 0 0 40px rgba(139, 69, 19, 0.15);
    display: flex;
    flex-direction: column;
    position: relative;
    color: #3e1f08;
    padding: 6px;
    animation: popIn 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 1;
    image-rendering: pixelated;
}

/* Header - From QuestMenu */
.header {
    background: transparent;
    color: #3e1f08;
    padding: 0.75rem 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
    border-bottom: 3px dashed #8b5a2b;
    margin-bottom: 1rem;
}

.title {
    font-size: 2rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    font-weight: bold;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);
    flex: 1;
    text-align: center;
}

.closeButton {
    width: 28px;
    height: 28px;
    padding: 2px;
    font-size: 16px;
    background-color: #f22561;
    color: #ffffff;
}

/* Shop Content Wrapper */
.shopContent {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
}

/* Custom Scrollbar styled for "paper" feel */
.shopContent::-webkit-scrollbar {
    width: 6px;
}

.shopContent::-webkit-scrollbar-track {
    background: rgba(62, 31, 8, 0.05);
}

.shopContent::-webkit-scrollbar-thumb {
    background: rgba(62, 31, 8, 0.3);
    border-radius: 3px;
}

/* --- CARDS STYLES (From CardsMenu) --- */

/* Shop Container - 16-bit style */
.shopContainer {
    width: 100%;
    max-width: 100%;
    padding: 0;
    margin: 0 auto;
    box-sizing: border-box;
    background-color: transparent;
    position: relative;
    z-index: 1;
}
.comingSoonBanner {
    margin: 0 0 16px 0;
    padding: 10px 12px;
    border: 3px dashed #8b5a2b;
    background: rgba(255, 255, 255, 0.2);
    color: #3e1f08;
    text-align: center;
    box-shadow: inset 0 0 24px rgba(139, 69, 19, 0.2);
}

.comingSoonTitle {
    font-family: 'VT323', monospace;
    font-size: 1.8rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);
}

.comingSoonText {
    margin-top: 4px;
    font-family: 'VT323', monospace;
    font-size: 1.2rem;
    opacity: 0.9;
}

/* Base Card Grid */
.packsRow {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    padding: 0;
}

@media (max-width: 768px) {
    .packsRow {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }
}

@media (max-width: 480px) {
    .packsRow {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
    }
}

/* Individual Card Styling - Pixelated 16-bit Style */
.packCard {
    position: relative;
    display: flex;
    flex-direction: column;
    border-radius: 0;
    overflow: hidden;
    box-shadow: 0 4px 0 rgba(0, 0, 0, 0.6);
    transition: transform 0.1s ease, box-shadow 0.1s ease;
    background: #0f172a;
    border: 4px solid;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    /* Pixel Stroke Effect */
    box-shadow:
        0 0 0 2px #000000,
        0 4px 6px rgba(0, 0, 0, 0.5);
}
.packCardDisabled {
    filter: grayscale(0.35) brightness(0.9);
    transform: none !important;
    cursor: not-allowed;
}

.packCardDisabled:hover {
    transform: none;
    box-shadow:
        0 0 0 2px #000000,
        0 4px 6px rgba(0, 0, 0, 0.5);
}

.packCard:hover {
    transform: translateY(-2px);
    box-shadow:
        0 0 0 2px #000000,
        0 8px 12px rgba(0, 0, 0, 0.6);
    z-index: 10;
}

/* Rarity Backgrounds - More Vivid Fantasy Gradients */
.rare {
    background: radial-gradient(circle at center, #60a5fa 0%, #172554 100%);
    border-color: #3b82f6;
    /* No glow box-shadow here to keep pixel stroke clean */
}

.epic {
    background: radial-gradient(circle at center, #c084fc 0%, #4c1d95 100%);
    border-color: #9333ea;
    /* No glow box-shadow here to keep pixel stroke clean */
}

.legendary {
    background: radial-gradient(circle at center, #fbbf24 0%, #451a03 100%);
    border-color: #f59e0b;
    /* No glow box-shadow here to keep pixel stroke clean */
}

/* Card Content */
.cardIllustration {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    padding: 8px;
    min-height: 100px;
}
.disabledOverlay {
    position: absolute;
    inset: 0;
    background: rgba(15, 23, 42, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3;
    color: #f8fafc;
    font-family: 'VT323', monospace;
    font-size: 1.1rem;
    letter-spacing: 1px;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7);
}

/* Glow behind items - Enhanced & Dynamic */
.glowEffect {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 150%;
    height: 150%;
    pointer-events: none;
    mix-blend-mode: screen;
    opacity: 0.9;
    background: repeating-conic-gradient(from 0deg,
            transparent 0deg,
            transparent 15deg,
            white 15deg,
            white 20deg);
    mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 10%, rgba(0, 0, 0, 0) 70%);
    -webkit-mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 10%, rgba(0, 0, 0, 0) 70%);
    animation: rotateGlow 30s linear infinite;
    z-index: 1;
}

@keyframes rotateGlow {
    from {
        transform: translate(-50%, -50%) rotate(0deg);
    }

    to {
        transform: translate(-50%, -50%) rotate(360deg);
    }
}

/* Specific starburst colors */
.rare .glowEffect {
    background: repeating-conic-gradient(from 0deg,
            rgba(59, 130, 246, 0) 0deg,
            rgba(59, 130, 246, 0) 15deg,
            rgba(59, 130, 246, 1) 15deg,
            rgba(96, 165, 250, 0.8) 18deg,
            rgba(59, 130, 246, 1) 20deg,
            rgba(59, 130, 246, 0) 20deg);
}

.epic .glowEffect {
    background: repeating-conic-gradient(from 0deg,
            rgba(168, 85, 247, 0) 0deg,
            rgba(168, 85, 247, 0) 15deg,
            rgba(192, 132, 252, 1) 15deg,
            rgba(232, 121, 249, 0.8) 18deg,
            rgba(192, 132, 252, 1) 20deg,
            rgba(168, 85, 247, 0) 20deg);
}

.legendary .glowEffect {
    background: repeating-conic-gradient(from 0deg,
            rgba(234, 179, 8, 0) 0deg,
            rgba(234, 179, 8, 0) 15deg,
            rgba(251, 191, 36, 1) 15deg,
            rgba(253, 224, 71, 0.8) 18deg,
            rgba(251, 191, 36, 1) 20deg,
            rgba(234, 179, 8, 0) 20deg);
}


.packImage {
    width: 85%;
    height: auto;
    object-fit: contain;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.6));
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 2;
}

.packCard:hover .packImage {
    transform: scale(1.1);
}

/* Footer - Seamless Integration */
.cardFooter {
    padding: 0;
    background: transparent;
    border-top: none;
    margin-top: auto;
}

.priceButton {
    width: 100%;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    border: none;
    border-radius: 0;
    padding: 8px 0;
    font-family: 'VT323', monospace;
    /* Use VT323 to match Quest style */
    font-weight: 700;
    font-size: 1.2rem;
    cursor: pointer;
    transition: background 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}
.priceButtonDisabled {
    background: rgba(0, 0, 0, 0.75);
    cursor: not-allowed;
    color: #e2e8f0;
}

.priceButtonDisabled:hover,
.priceButtonDisabled:active {
    background: rgba(0, 0, 0, 0.75);
    color: #e2e8f0;
}

.priceButton:hover {
    background: rgba(0, 0, 0, 0.8);
    color: #fbbf24;
}

.priceButton:active {
    background: rgba(0, 0, 0, 0.9);
}


/* Popup for Purchase Confirmation (Nested) */
.popupOverlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 100;
    backdrop-filter: blur(2px);
    animation: fadeIn 0.15s ease-out;
}

.popupContent {
    position: relative;
    background-color: #e8be82;
    padding: 6px;
    width: 90%;
    max-width: 320px;
    text-align: center;
    box-shadow: inset 0 0 40px rgba(139, 69, 19, 0.15);
    animation: popIn 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    color: #3e1f08;
    display: flex;
    flex-direction: column;
    z-index: 1;
}

.popupCloseButton {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 28px;
    height: 28px;
    padding: 2px;
    font-size: 16px;
    z-index: 10;
    background-color: #f22561;
}

.popupTitle {
    font-family: 'VT323', monospace;
    font-size: 2rem;
    color: #3e1f08;
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 2px;
    text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
    font-weight: bold;
    padding: 0.75rem 1rem;
    border-bottom: 3px dashed #8b5a2b;
}

.popupDescription {
    font-family: 'VT323', monospace;
    font-size: 1.4rem;
    color: #3e1f08;
    line-height: 1.5;
    margin: 0;
    text-shadow: none;
    padding: 1rem;
}

.popupActions {
    display: flex;
    gap: 12px;
    justify-content: center;
    padding: 1rem;
}

.cancelButton,
.confirmButton {
    flex: 1;
    font-size: 1.2rem;
    padding: 3px 12px;
}

.cancelButton {
    background-color: #f22561;
}

.confirmButton {
    background-color: #4bb244;
}