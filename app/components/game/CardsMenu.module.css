/* Main Container - Restored to BG Image */
.container {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--spacing-lg) var(--spacing-md) var(--spacing-md);
  background: url(https://htdiytcpgyawxzpitlll.supabase.co/storage/v1/object/public/assets/background.png) no-repeat center top;
  background-size: 100% auto;
  height: calc(100vh - 90px);
  /* Account for bottom nav */
  max-height: calc(100vh - 90px);
  /* Fixed height to prevent scrolling */
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  /* Allow scroll only inside cards menu content if needed */
  box-sizing: border-box;
}

/* Titles */
.title {
  font-family: var(--font-pixelify);
  font-size: 32px;
  color: #fff;
  text-transform: uppercase;
  text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
  margin-bottom: var(--spacing-md);
  letter-spacing: 1px;
}

.sectionTitle {
  font-family: var(--font-pixelify);
  font-size: 16px;
  color: #f1f5f9;
  text-transform: uppercase;
  margin-bottom: 16px;
  text-align: center;
  letter-spacing: 1px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  border-bottom: none;
  padding-bottom: 0;
  display: block;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  /* Prevent text overflow */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Shop Container */
.shopContainer {
  width: 100%;
  max-width: 100%;
  padding: 0 var(--spacing-md);
  margin-bottom: 40px;
  box-sizing: border-box;
}

/* Base Card Grid */
.packsRow {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  padding: 0;
}

@media (max-width: 768px) {
  .packsRow {
    gap: 12px;
  }
}

@media (max-width: 480px) {
  .packsRow {
    gap: 8px;
  }
  
  /* Mobile adjustments for inventory */
  .inventoryContainer {
    padding: 10px;
  }
  
  .cardsGrid {
    gap: 6px;
  }
  
  .sectionTitle {
    font-size: 14px;
    margin-bottom: 12px;
  }
  
  .useButton {
    font-size: 9px;
    padding: 5px 6px;
  }
  
  .cardSlotWrapper {
    gap: 4px;
  }
}

/* Individual Card Styling - Improved RPG Fantasy Style */
.packCard {
  position: relative;
  display: flex;
  flex-direction: column;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  background: #0f172a;
  /* Fallback */
  border: 4px solid;
  /* Thick borders for RPG feel */
}

.packCard:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.7);
  z-index: 10;
}

/* Rarity Backgrounds - More Vivid Fantasy Gradients */
.rare {
  background: radial-gradient(circle at center, #60a5fa 0%, #172554 100%);
  border-color: #3b82f6;
  box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
}

.epic {
  background: radial-gradient(circle at center, #c084fc 0%, #4c1d95 100%);
  border-color: #9333ea;
  box-shadow: 0 0 10px rgba(147, 51, 234, 0.5);
}

.legendary {
  background: radial-gradient(circle at center, #fbbf24 0%, #451a03 100%);
  border-color: #f59e0b;
  box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
}

/* Card Content */
.cardIllustration {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  padding: 8px;
  min-height: 100px;
}

/* Glow behind items - Enhanced & Dynamic */
/* Glow behind items - Sharp Starburst */
.glowEffect {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 150%;
  height: 150%;
  pointer-events: none;
  mix-blend-mode: screen;
  opacity: 0.9;
  /* Sharp Starburst Pattern */
  background: repeating-conic-gradient(from 0deg,
      transparent 0deg,
      transparent 15deg,
      white 15deg,
      white 20deg);
  mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 10%, rgba(0, 0, 0, 0) 70%);
  -webkit-mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 10%, rgba(0, 0, 0, 0) 70%);
  animation: rotateGlow 30s linear infinite;
  z-index: 1;
}

@keyframes rotateGlow {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }

  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* Specific starburst colors */
.rare .glowEffect {
  background: repeating-conic-gradient(from 0deg,
      rgba(59, 130, 246, 0) 0deg,
      rgba(59, 130, 246, 0) 15deg,
      /* Transparent Gap */
      rgba(59, 130, 246, 1) 15deg,
      /* Hard Start */
      rgba(96, 165, 250, 0.8) 18deg,
      rgba(59, 130, 246, 1) 20deg,
      /* Hard End */
      rgba(59, 130, 246, 0) 20deg);
}

.epic .glowEffect {
  background: repeating-conic-gradient(from 0deg,
      rgba(168, 85, 247, 0) 0deg,
      rgba(168, 85, 247, 0) 15deg,
      rgba(192, 132, 252, 1) 15deg,
      rgba(232, 121, 249, 0.8) 18deg,
      rgba(192, 132, 252, 1) 20deg,
      rgba(168, 85, 247, 0) 20deg);
}

.legendary .glowEffect {
  background: repeating-conic-gradient(from 0deg,
      rgba(234, 179, 8, 0) 0deg,
      rgba(234, 179, 8, 0) 15deg,
      rgba(251, 191, 36, 1) 15deg,
      rgba(253, 224, 71, 0.8) 18deg,
      rgba(251, 191, 36, 1) 20deg,
      rgba(234, 179, 8, 0) 20deg);
}


.packImage {
  width: 85%;
  height: auto;
  object-fit: contain;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.6));
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  z-index: 2;
}

.packCard:hover .packImage {
  transform: scale(1.1);
}

/* Footer - Seamless Integration */
.cardFooter {
  padding: 0;
  background: transparent;
  border-top: none;
  margin-top: auto;
}

.priceButton {
  width: 100%;
  background: rgba(0, 0, 0, 0.6);
  color: white;
  border: none;
  border-radius: 0;
  /* Full width seamless */
  padding: 8px 0;
  font-family: var(--font-pixelify);
  font-weight: 700;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.priceButton:hover {
  background: rgba(0, 0, 0, 0.8);
  color: #fbbf24;
  /* Gold text on hover */
}

.priceButton:active {
  background: rgba(0, 0, 0, 0.9);
}

@media (max-width: 480px) {
  .priceButton {
    font-size: 11px;
    padding: 6px 0;
  }
}

/* Inventory Section */
.inventoryContainer {
  width: 100%;
  max-width: 100%;
  padding: 12px;
  margin: 0 auto;
  box-sizing: border-box;
  background: rgba(15, 23, 42, 0.6);
  /* Semi-transparent background */
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(8px);
  /* Ensure container doesn't overflow */
  overflow: hidden;
}

.cardsGrid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  /* Prevent grid from overflowing */
  min-width: 0;
}

.cardSlotWrapper {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
  /* Prevent wrapper from overflowing */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

.cardSlot {
  aspect-ratio: 2/3;
  /* Portrait Ratio for Cards */
  background: #0f172a;
  border-radius: 8px;
  border: 2px solid #334155;
  /* Default border */
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.8);
  transition: transform 0.1s, border-color 0.2s;
  /* Ensure consistent size - no size changes on selection */
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  max-width: 100%;
  max-height: 100%;
}

.cardSlotSelected {
  border: 3px solid #10b981;
  box-shadow: 
    inset 0 0 12px rgba(0, 0, 0, 0.8),
    0 0 12px rgba(16, 185, 129, 0.4);
  /* Ensure no size change - use same dimensions */
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  max-width: 100%;
  max-height: 100%;
}


.cardSlot:hover {
  transform: translateY(-2px);
  border-color: #94a3b8;
}

.cardInner {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
}

.cardImage {
  width: 90%;
  height: 90%;
  object-fit: contain;
  filter: drop-shadow(0 4px 4px rgba(0, 0, 0, 0.5));
  /* Ensure image doesn't change size when card is selected */
  max-width: 90%;
  max-height: 90%;
  min-width: 0;
  min-height: 0;
}

.cardCount {
  position: absolute;
  top: -6px;
  right: -6px;
  background: #fbbf24;
  /* Gold badge */
  color: #451a03;
  font-family: var(--font-pixelify);
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 99px;
  border: 2px solid #78350f;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  min-width: 16px;
  text-align: center;
  z-index: 5;
}

.cardEmpty {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(15, 23, 42, 0.3);
  border: 2px dashed #475569;
  border-radius: 6px;
  position: relative;
}

.cardEmptyLabel {
  font-family: var(--font-pixelify);
  font-size: 10px;
  font-weight: 600;
  color: #64748b;
  text-align: center;
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0.7;
}

.useButton {
  width: 100%;
  padding: 6px 8px;
  background: #3b82f6;
  border: 2px solid #1e40af;
  color: #ffffff;
  font-family: var(--font-pixelify);
  font-weight: bold;
  font-size: 10px;
  text-transform: uppercase;
  cursor: pointer;
  box-shadow: 
    0 2px 0 #1e40af,
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  transition: all 0.15s ease;
  border-radius: 0;
  text-align: center;
  box-sizing: border-box;
  /* Ensure button doesn't overflow */
  min-width: 0;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.useButton:hover:not(:disabled) {
  background: #60a5fa;
  transform: translateY(1px);
  box-shadow: 
    0 1px 0 #1e40af,
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.useButton:active:not(:disabled) {
  transform: translateY(2px);
  box-shadow: 
    0 0 0 #1e40af,
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.useButton:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.useButtonSelected {
  background: #10b981;
  border-color: #047857;
  box-shadow: 
    0 2px 0 #047857,
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.useButtonSelected:hover:not(:disabled) {
  background: #34d399;
  box-shadow: 
    0 1px 0 #047857,
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.emptyButtonPlaceholder {
  width: 100%;
  min-height: 32px;
  /* Match useButton height (padding 6px top + 6px bottom + line-height ~20px + border 2px top + 2px bottom) */
  box-sizing: border-box;
  max-width: 100%;
}

.bottomSpacer {
  height: 40px;
}

/* Modals */
.popupOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  backdrop-filter: blur(2px);
  animation: fadeIn 0.15s ease-out;
}

.popupContent {
  position: relative;
  background-color: #e8be82;
  border: 4px solid #3e1f08;
  outline: 4px solid #2a1810;
  border-radius: 0;
  padding: 6px;
  width: 90%;
  max-width: 320px;
  text-align: center;
  box-shadow:
    inset 0 0 40px rgba(139, 69, 19, 0.15),
    10px 10px 0 rgba(0, 0, 0, 0.5);
  animation: popIn 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  color: #3e1f08;
  display: flex;
  flex-direction: column;
}

@keyframes popIn {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.popupCloseButton {
  position: absolute;
  top: 8px;
  right: 8px;
  width: 32px;
  height: 32px;
  background: #a52a2a;
  border: 2px solid #3e1f08;
  color: #f3e5c9;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'VT323', monospace;
  font-weight: bold;
  font-size: 18px;
  line-height: 1;
  z-index: 10;
  padding: 0;
  box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
  transition: all 0.1s;
  image-rendering: pixelated;
}

.popupCloseButton:hover {
  background: #c0392b;
  transform: scale(1.05);
}

.popupCloseButton:active {
  transform: translate(2px, 2px);
  box-shadow: none;
}

.popupTitle {
  font-family: 'VT323', monospace;
  font-size: 2rem;
  color: #3e1f08;
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 2px;
  text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.4);
  font-weight: bold;
  padding: 0.75rem 1rem;
  border-bottom: 3px dashed #8b5a2b;
}

.popupDescription {
  font-family: 'VT323', monospace;
  font-size: 1.4rem;
  color: #3e1f08;
  line-height: 1.5;
  margin: 0;
  text-shadow: none;
  padding: 1rem;
}

.popupActions {
  display: flex;
  gap: 12px;
  justify-content: center;
  padding: 1rem;
}

.cancelButton,
.confirmButton {
  flex: 1;
  padding: 0.75rem;
  border: 2px solid #3e1f08;
  border-radius: 0;
  font-family: 'VT323', monospace;
  font-size: 1.5rem;
  cursor: pointer;
  color: #f3e5c9;
  transition: all 0.1s;
  font-weight: bold;
  text-transform: uppercase;
  image-rendering: pixelated;
  box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3);
}

.cancelButton {
  background: #a52a2a;
}

.cancelButton:hover {
  background: #c0392b;
  transform: translate(-1px, -1px);
  box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3);
}

.cancelButton:active {
  transform: translate(2px, 2px);
  box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);
}

.confirmButton {
  background: #5e9c6f;
}

.confirmButton:hover {
  transform: translate(-1px, -1px);
  box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3);
}

.confirmButton:active {
  transform: translate(2px, 2px);
  box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.3);
}

.confirmButton:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Toast Message */
.toast {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 16px 40px 16px 24px;
  border-radius: 8px;
  color: white;
  font-family: var(--font-pixelify);
  font-size: 14px;
  z-index: 10000;
  cursor: pointer;
  animation: slideIn 0.3s ease-out;
  max-width: 400px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.toastCloseButton {
  position: absolute;
  top: 8px;
  right: 8px;
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  line-height: 1;
  padding: 0;
  transition: background 0.2s ease;
}

.toastCloseButton:hover {
  background: rgba(255, 255, 255, 0.3);
}

.toast.success {
  background: #22c55e;
}

.toast.error {
  background: #ef4444;
}

.toast.info {
  background: #3b82f6;
}

@keyframes slideIn {
  from {
    transform: translateX(400px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
